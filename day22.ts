// https://typehero.dev/challenge/day-22

// tests
import { Equal, Expect } from 'type-testing';

type test_sudoku_1_actual = Validate<[
//   ^?
  [['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´']],
  [['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸']],
  [['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ']],
  [['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ'], ['âš¡', 'â˜„ï¸', 'â¤ï¸'], ['ğŸ”´', 'ğŸŒ©ï¸', 'ğŸŒŸ']],
  [['ğŸŒ©ï¸', 'ğŸ”´', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ'], ['âš¡', 'â˜„ï¸', 'â¤ï¸']],
  [['âš¡', 'â˜„ï¸', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸ”´', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ']],
  [['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸'], ['ğŸŒ©ï¸', 'ğŸ”´', 'âš¡']],
  [['ğŸ”´', 'ğŸŒ©ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸']],
  [['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸'], ['ğŸ”´', 'ğŸŒ©ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨']]
]>;
type test_sudoku_1 = Expect<Equal<test_sudoku_1_actual, true>>;

type test_sudoku_2_actual = Validate<[
//   ^?
  [['ğŸŒ©ï¸', 'ğŸ’¨', 'â˜„ï¸'], ['ğŸŒŸ', 'ğŸ¦Œ', 'âš¡'], ['â¤ï¸', 'ğŸ”´', 'ğŸ’ƒ']],
  [['ğŸŒŸ', 'âš¡', 'â¤ï¸'], ['ğŸ”´', 'ğŸ’ƒ', 'â˜„ï¸'], ['ğŸŒ©ï¸', 'ğŸ’¨', 'ğŸ¦Œ']],
  [['ğŸ”´', 'ğŸ¦Œ', 'ğŸ’ƒ'], ['ğŸ’¨', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'â˜„ï¸']],
  [['â¤ï¸', 'â˜„ï¸', 'ğŸŒ©ï¸'], ['ğŸ’ƒ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ¦Œ', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ’ƒ', 'âš¡'], ['ğŸŒ©ï¸', 'ğŸŒŸ', 'ğŸ’¨'], ['ğŸ”´', 'â˜„ï¸', 'â¤ï¸']],
  [['ğŸ’¨', 'ğŸŒŸ', 'ğŸ”´'], ['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸'], ['âš¡', 'ğŸ’ƒ', 'ğŸŒ©ï¸']],
  [['â˜„ï¸', 'ğŸ”´', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒ©ï¸', 'ğŸ¦Œ'], ['ğŸ’ƒ', 'ğŸŒŸ', 'âš¡']],
  [['ğŸ’ƒ', 'â¤ï¸', 'ğŸ¦Œ'], ['âš¡', 'ğŸ”´', 'ğŸŒŸ'], ['â˜„ï¸', 'ğŸŒ©ï¸', 'ğŸ’¨']],
  [['âš¡', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['â˜„ï¸', 'ğŸ’¨', 'ğŸ’ƒ'], ['ğŸ¦Œ', 'â¤ï¸', 'ğŸ”´']]
]>;
type test_sudoku_2 = Expect<Equal<test_sudoku_2_actual, true>>;

type test_sudoku_3_actual = Validate<[
//   ^?
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸŒŸ', 'âš¡', 'ğŸ’¨'], ['â¤ï¸', 'ğŸ’ƒ', 'ğŸ”´'], ['â˜„ï¸', 'ğŸŒ©ï¸', 'ğŸ¦Œ']],
  [['â˜„ï¸', 'ğŸŒ©ï¸', 'â¤ï¸'], ['âš¡', 'ğŸŒŸ', 'ğŸ¦Œ'], ['ğŸ’ƒ', 'ğŸ”´', 'ğŸ’¨']],
  [['ğŸŒ©ï¸', 'ğŸ’ƒ', 'ğŸ”´'], ['ğŸ¦Œ', 'ğŸ’¨', 'âš¡'], ['ğŸŒŸ', 'â˜„ï¸', 'â¤ï¸']],
  [['â¤ï¸', 'â˜„ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ”´']],
  [['ğŸ’¨', 'ğŸŒŸ', 'ğŸ¦Œ'], ['â˜„ï¸', 'ğŸ”´', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸ’ƒ', 'âš¡']],
  [['ğŸ’ƒ', 'ğŸ’¨', 'ğŸŒŸ'], ['ğŸ”´', 'ğŸ¦Œ', 'â˜„ï¸'], ['â¤ï¸', 'âš¡', 'ğŸŒ©ï¸']],
  [['ğŸ”´', 'â¤ï¸', 'â˜„ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸŒ©ï¸'], ['ğŸ’¨', 'ğŸ¦Œ', 'ğŸ’ƒ']],
  [['âš¡', 'ğŸ¦Œ', 'ğŸŒ©ï¸'], ['ğŸ’¨', 'â¤ï¸', 'ğŸ’ƒ'], ['ğŸ”´', 'ğŸŒŸ', 'â˜„ï¸']]
]>;
type test_sudoku_3 = Expect<Equal<test_sudoku_3_actual, true>>;

type test_sudoku_4_actual = Validate<[
//   ^?
  [['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´']],
  [['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸']],
  [['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ']],
  [['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ'], ['âš¡', 'â˜„ï¸', 'â¤ï¸'], ['ğŸ”´', 'ğŸŒ©ï¸', 'ğŸŒŸ']],
  [['ğŸŒ©ï¸', 'ğŸ”´', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ'], ['âš¡', 'â˜„ï¸', 'â¤ï¸']],
  [['âš¡', 'â˜„ï¸', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸ”´', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ']],
  [['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸'], ['âš¡', 'ğŸ”´', 'ğŸŒŸ']],
  [['ğŸ”´', 'ğŸŒ©ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸']],
  [['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸'], ['ğŸ”´', 'ğŸŒ©ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨']]
]>;
type test_sudoku_4 = Expect<Equal<test_sudoku_4_actual, false>>;

type test_sudoku_5_actual = Validate<[
//   ^?
  [['ğŸŒ©ï¸', 'ğŸ’¨', 'â˜„ï¸'], ['ğŸŒŸ', 'ğŸ¦Œ', 'âš¡'], ['â¤ï¸', 'ğŸ”´', 'ğŸ’ƒ']],
  [['ğŸŒŸ', 'âš¡', 'â¤ï¸'], ['ğŸ”´', 'ğŸ’ƒ', 'â˜„ï¸'], ['ğŸŒ©ï¸', 'ğŸ’¨', 'ğŸ¦Œ']],
  [['ğŸ”´', 'ğŸ¦Œ', 'ğŸ’ƒ'], ['ğŸ’¨', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'â˜„ï¸']],
  [['â¤ï¸', 'â˜„ï¸', 'ğŸŒ©ï¸'], ['ğŸ’ƒ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ¦Œ', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ’ƒ', 'âš¡'], ['ğŸŒ©ï¸', 'ğŸŒŸ', 'ğŸ’¨'], ['ğŸ”´', 'â˜„ï¸', 'â¤ï¸']],
  [['ğŸ’¨', 'ğŸŒŸ', 'ğŸ”´'], ['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸'], ['âš¡', 'ğŸ’ƒ', 'ğŸŒ©ï¸']],
  [['â˜„ï¸', 'ğŸ”´', 'ğŸ’¨'], ['â¤ï¸', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['ğŸ’ƒ', 'ğŸŒŸ', 'âš¡']],
  [['ğŸ’ƒ', 'â¤ï¸', 'ğŸ¦Œ'], ['âš¡', 'ğŸ”´', 'ğŸŒŸ'], ['â˜„ï¸', 'ğŸŒ©ï¸', 'ğŸ’¨']],
  [['âš¡', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['â˜„ï¸', 'ğŸ’¨', 'ğŸ’ƒ'], ['ğŸ¦Œ', 'â¤ï¸', 'ğŸ”´']]
]>;
type test_sudoku_5 = Expect<Equal<test_sudoku_5_actual, false>>;

type test_sudoku_6_actual = Validate<[
//   ^?
  [['âš¡', 'ğŸ”´', 'ğŸŒ©ï¸'], ['ğŸ¦Œ', 'â¤ï¸', 'ğŸ’¨'], ['ğŸ’¨', 'ğŸŒŸ', 'â˜„ï¸']],
  [['â¤ï¸', 'ğŸ¦Œ', 'ğŸŒŸ'], ['ğŸ’¨', 'ğŸŒŸ', 'ğŸ”´'], ['ğŸ’ƒ', 'âš¡', 'ğŸŒ©ï¸']],
  [['ğŸ’¨', 'ğŸ’ƒ', 'ğŸŒŸ'], ['â˜„ï¸', 'âš¡', 'ğŸŒ©ï¸'], ['ğŸ”´', 'â¤ï¸', 'ğŸ¦Œ']],
  [['ğŸ¦Œ', 'âš¡', 'ğŸ”´'], ['â¤ï¸', 'ğŸ’ƒ', 'ğŸ’¨'], ['â˜„ï¸', 'ğŸŒ©ï¸', 'ğŸŒŸ']],
  [['ğŸŒŸ', 'ğŸŒ©ï¸', 'ğŸ’ƒ'], ['âš¡', 'ğŸ”´', 'â˜„ï¸'], ['â¤ï¸', 'ğŸ¦Œ', 'ğŸ’¨']],
  [['â˜„ï¸', 'ğŸ’¨', 'â¤ï¸'], ['ğŸŒŸ', 'ğŸŒ©ï¸', 'ğŸ¦Œ'], ['âš¡', 'ğŸ’ƒ', 'ğŸ”´']],
  [['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'âš¡'], ['ğŸŒŸ', 'ğŸ”´', 'â¤ï¸']],
  [['ğŸ”´', 'â¤ï¸', 'âš¡'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ']],
  [['ğŸ’ƒ', 'ğŸŒŸ', 'ğŸ¦Œ'], ['ğŸ”´', 'ğŸ’¨', 'â¤ï¸'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'âš¡']]
]>;
type test_sudoku_6 = Expect<Equal<test_sudoku_6_actual, false>>;

type test_sudoku_7_actual = Validate<[
  [['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´']],
  [['ğŸ’ƒ', 'ğŸ¦Œ', 'â˜„ï¸'], ['â¤ï¸', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['âš¡', 'ğŸ”´', 'ğŸ’¨']],
  [['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸŒŸ', 'âš¡'], ['ğŸ”´', 'ğŸ’¨', 'ğŸ’ƒ']],
  [['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ']],
  [['â¤ï¸', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['âš¡', 'ğŸ”´', 'ğŸ’¨'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'â˜„ï¸']],
  [['ğŸŒ©ï¸', 'ğŸŒŸ', 'âš¡'], ['ğŸ”´', 'ğŸ’¨', 'ğŸ’ƒ'], ['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸']],
  [['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸']],
  [['âš¡', 'ğŸ”´', 'ğŸ’¨'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'â˜„ï¸'], ['â¤ï¸', 'ğŸŒ©ï¸', 'ğŸŒŸ']],
  [['ğŸ”´', 'ğŸ’¨', 'ğŸ’ƒ'], ['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸŒŸ', 'âš¡']]
]>;

type test_sudoku_7 = Expect<Equal<test_sudoku_7_actual, false>>;

type test_sudoku_8_actual = Validate<[
//   ^?
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']]
]>;

type test_sudoku_8 = Expect<Equal<test_sudoku_8_actual, false>>;


// solution
/** because "dashing" implies speed */
type Dasher = 'ğŸ’¨';

/** representing dancing or grace */
type Dancer = 'ğŸ’ƒ';

/** a deer, prancing */
type Prancer = 'ğŸ¦Œ';

/** a star for the dazzling, slightly mischievous Vixen */
type Vixen = 'ğŸŒŸ';

/** for the celestial body that shares its name */
type Comet = 'â˜„ï¸';

/** symbolizing love, as Cupid is the god of love */
type Cupid = 'â¤ï¸';

/** representing thunder, as "Donner" means thunder in German */
type Donner = 'ğŸŒ©ï¸';

/** meaning lightning in German, hence the lightning bolt */
type Blitzen = 'âš¡';

/** for his famous red nose */
type Rudolph = 'ğŸ”´';

type Reindeer = Dasher | Dancer | Prancer | Vixen | Comet | Cupid | Donner | Blitzen | Rudolph;

type _ValidateRow<T extends Reindeer[]> =
  T extends [infer F extends Reindeer, ...infer R extends Reindeer[]]
    ? F extends R[number]
      ? false
      : _ValidateRow<R>
    : true;

type ValidateRow<T extends Reindeer[][][]> =
  T extends [infer F extends Reindeer[][], ...infer R extends Reindeer[][][]]
    ? _ValidateRow<[...F[0], ...F[1], ...F[2]]> extends true
      ? ValidateRow<R> extends true
        ? true
        : false
      :false
    : never;

type _ValidateCol<T extends Reindeer[][][], Col extends Reindeer[] = [], B extends number = 0, X extends number = 0> =
  T extends [infer F extends Reindeer[][], ...infer R extends Reindeer[][][]]
    ? _ValidateCol<R, [...Col, F[B][X]], B, X>
    : _ValidateRow<Col> extends true
      ? true
      : false;

type ValidateCol<T extends Reindeer[][][], B extends number = 0, X extends number = 0, BC extends any[] = [], XC extends any[] = []> =
  BC['length'] extends 3
    ? true
    : _ValidateCol<T, [], B, X> extends false
        ? false
        : ValidateCol<T, BC['length'], XC['length'], XC['length'] extends 3 ? [...BC, 0] : BC, XC['length'] extends 3 ? [] : [...XC, 0]>;

type ValidateBox<T extends Reindeer[][][]> =
  T extends [infer First extends Reindeer[][], infer Second extends Reindeer[][], infer Third extends Reindeer[][], ...infer R extends Reindeer[][][]]
    ? _ValidateRow<[...First[0], ...Second[0], ...Third[0]]> extends true
      ? _ValidateRow<[...First[1], ...Second[1], ...Third[1]]> extends true
        ? _ValidateRow<[...First[2], ...Second[2], ...Third[2]]> extends true
          ? ValidateBox<R>
          : false
        : false
      : false
    : true;

type Validate<T extends Reindeer[][][]> =
  ValidateRow<T> extends true
    ? ValidateCol<T> extends true
      ? ValidateBox<T> extends true
        ? true
        : false
      : false
    : false;